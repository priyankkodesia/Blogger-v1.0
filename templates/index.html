{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
	<title>BLOG</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	 crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<style>
		body {
			background-color: #333;
			
		}

		#logout {
			position: absolute;
			top: 18px;
			right: 24px
		}

		.navbar-form {
			position: absolute;
			right: 120px
		}

		.carousel-caption h3 {
			color: black;
			font-weight: bold;
			font-family: Cambria, Cochin, Georgia, Times, Times New Roman, serif
		}

		#myCarousel {
			background-color: black !important;
			border: 1px solid black;
			max-width: 98.8%;
			margin: auto;
			margin-top: -10px;
		}

		.navbar {
			padding-top: 10px;
			padding-bottom: 10px;
		}

		#list-headings {
			background-color:#1d73af !important;
			padding: 6px;
			text-align: center;
			max-width: 98.8%;
			margin: auto;
		}
		#search{	
			background-color: #1d73af !important;
			margin-bottom:60px !important;
			text-align: center;
			max-width: 98.8%;
			margin: auto;
		}

		#list-headings a {
			text-decoration: none;
		}

		.link {
			height: 50px;
			text-align: center
		}

		.link:hover {
			background-color:#7c2d15;
			border-radius: 5px
		}

		.link2:hover {
			background-color:#555;
			border-radius: 5px
		}

		.acti {
			background-color: #000;
			border-radius: 5px
		}

		.category-links.small {
			font-family: Cambria, Cochin, Georgia, Times, Times New Roman, serif;
			font-size: 20px;
			margin: 8px 10px -13px 10px;

			color: white;
			text-decoration: none;
		}

		#list {
			background-color: seashell;
			max-width: 98.8%;
			margin: auto;
			border-right: 1.5px solid grey
		}

		.item {
			
			color: #333;
			
		}
		.item h2:hover{color:#666}
		.thumbnail{color:white}
	</style>
</head>


<body>
	<div class="container-fluid">
		<nav class="navbar navbar-inverse">
			<div class="navbar-header">
				<a class="navbar-brand">BLOG</a>
			</div>
			<ul class="nav navbar-nav">
				<li class="active"><a href="#"><span class="glyphicon glyphicon-home"></span>&nbsp;Home</a></li>
				<li><a href="{% url 'Posts:create' %}"><span class="glyphicon glyphicon-pencil"></span>&nbsp;Create</a></li>
				<li><a href="{% url 'Posts:chat' %}"><span class="glyphicon glyphicon-user"></span><span class="glyphicon glyphicon-user"></span>&nbsp;Chat Room</a></li>
				<li><a href="{% url 'Posts:change_password' %}"<span style="right:-650px;margin-top:-3px;" class="glyphicon glyphicon-wrench"></span><span style="font-family:Cambria, Cochin, Georgia, Times, Times New Roman, serif">&nbsp;&nbsp;Password Change</span></a></li>

			</ul>
	
			<a href="{% url 'logout' %}"><button class="btn btn-info" id="logout" type="submit" style ><span class="glyphicon glyphicon-log-out"><span style="font-size:14px;margin-left:-4px;padding-top:-4px"> Logout</span></span></button></a>



		</nav>
	</div>
	<div class="container-fluid">
		<div id="myCarousel" class="carousel slide" data-ride="carousel">
			<!-- Indicators -->
			<ol class="carousel-indicators">
				<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
				<li data-target="#myCarousel" data-slide-to="1"></li>
				<li data-target="#myCarousel" data-slide-to="2"></li>
				<li data-target="#myCarousel" data-slide-to="3"></li>
				<li data-target="#myCarousel" data-slide-to="4"></li>
			</ol>

			<!-- Wrapper for slides -->
			<div class="carousel-inner">

				<div class="item active">
					<img src="{% static 'img/carousel-1.jpg' %}" alt="Los Angeles" style="width:100%;height:470px;">
					<div class="carousel-caption">
						<h3>TRAVEL</h3>
						<p>LA is always so much fun!</p>
					</div>
				</div>

				<div class="item">
					<img src="{% static 'img/carousel-2.jpg' %}" alt="Chicago" style="width:100%;height:470px;">
					<div class="carousel-caption">
						<h3>EXPLORE</h3>
						<p>Thank you, Chicago!</p>
					</div>
				</div>

				<div class="item">
					<img src="{% static 'img/carousel-3.jpg' %}" class="img-responsive" alt="New York" style="width:100%;height:470px;">
					<div class="carousel-caption">
						<h3>SHARE WITH US</h3>
						<p>We love the Big Apple!</p>
					</div>
				</div>
				<div class="item">
					<img src="{% static 'img/carousel-4.jpg' %}"
					 alt="New York" style="width:100%;height:470px;" class="img-responsive">
					<div class="carousel-caption">
						<h3>CHASE YOUR DESTINY</h3>
						<p>Coz it's meant to be different!</p>
					</div>
				</div>
				<div class="item">
					<img src="{% static 'img/carousel-5.jpg' %}" alt="New York" style="width:100%;height:470px;" class="img-responsive">
					<div class="carousel-caption">
						<h3>FIND YOUR MATES</h3>
						<p>They were always there..Waiting for you!!</p>
					</div>
				</div>

			</div>

			<!-- Left and right controls -->
			<a class="left carousel-control" href="#myCarousel" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </a>
			<a class="right carousel-control" href="#myCarousel" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </a>
		</div>
	</div>
	<div class="container-fluid">
		<div class="row " id='list-headings'>
			<div class="col-sm-5">
				<p style="margin:2px -13px -15px -50px;padding:11px 11px;font-size:20px; color:white"><b>Recent Posts</b></p>
							
			</div>
<div class="col-sm-4 ">
				<a href="{% url 'Posts:list' %}" ><span class="glyphicon glyphicon-refresh" style="margin-left:-30%;color:black;font-size:18px"></button></a>

	</div>


			<div class="col-sm-3 ">
				
					<h4 class="category-links large" style="font-size:20px;
									font-weight:700;
									margin:9px -15px -5px 0px;margin-left:-10px;
									color:white;text-decoration:none;">New Authors</h4>
					
			</div>
		</div>
	</div>
		<div class="container-fluid body" style="background-color:#1d73af;max-width:96.6%">
		<div class="row " id='search'>
			<div class="col-sm-5">
				<form class="navbar-form"  method='POST' action=''> {% csrf_token %}

					<div class="form-group">
						<input class="form-control " type="text" id="search_text" placeholder="Search Posts" value='{{ request.POST.get }}' name='q'>
					</div>
					<button class="btn btn-primary"  id="search_btn" type="submit" >Search</button>
				</form>

			</div>
		
							<div class="col-sm-3 link acti" style="margin-bottom:-30px;border-left:1px solid grey;">
								<a href="" style="text-decoration:none">
									<p class="category-links small" id="videos_link">Videos</p>
								</a>


							</div>

			

			<div class="col-sm-3 " >
				<form style="display:flex" class="navbar-form" method='POST' action=''> {% csrf_token %}

					<div class="form-group">
						<input class="form-control " style="margin-right:-50px" type="text" id="search_authors" placeholder="Search Authors" value='{{ request.POST.get }}' name='query'>

					</div>
					<button class="btn btn-primary" style="margin-right:-210px;margin-left:55px" id="search_btn2" type="submit">Search</button>
				
				</form>

			</div>
		</div>

	</div>


	<div class="container-fluid" style="background-color:#222;">
		<div class="row" id='list' style="background-color:#333 !important;">
			<div class="col-sm-5" style="background-color:#222;margin-bottom:10px;padding-bottom:30px">
						
				<div class="item content-markdown posts-list" style="border-bottom:.5px solid white !important;margin-top:18px;margin-bottom:12px">
									
					<div id="searcher">
					{% for post in posts_list %}
					<div class="posts_list thumbnail" style="background-image:url('http://cdn.wallpapersafari.com/73/78/je0icI.jpg');background-size:100% 100%;padding:13px !important;max-height:195px">
					{% if post.image %}<img src="{{ post.image.url }}" class="img-responsive" style="height:150px;width:140px;float:left;margin:10px 15px 10px 20px;border:0.8px solid grey">{% endif %}
					<a href="{{ post.get_absolute_url }}" style="text-decoration:none;color:white;"><h2 style="margin:10px 5px 13px 15px;font-weight:900;">{{ post.title|capfirst }}</h2></a>
					<div >{{ post.content|truncatechars:80 }}</div><br>
					&nbsp; <span style="margin-top:80px !important"><p style="float:right;margin-bottom:2px;font-size:20px"><b>{{ post.Author.get_full_name }}</b></p><p style="margin-left:80%;margin-bottom:20px !important">{{ post.timestamp|date }}</p></span>
					
				
					</div>
					{% endfor %}
				<br></div><br>
				</div>
 
					<span  class="view_all_posts" style="margin-bottom:10px;margin-top:10px"><a href="{% url 'Posts:posts' %}"><button type="button"  style="margin-left:40%;" class="btn btn-primary">View All</button></a></span>
	
			</div>
			<div class="col-sm-3" id="middle-div" style="background-color:#111;color:white !important;padding-bottom:30px;">
				<div class="videos" >
					<div class="vid-1"> 
						<h2 id="heading-vid-1" style="margin:22px 5px 12px 15px;font-weight:900;text-align:center">Around the World!!</h2>
						<iframe id="vid-1" width="300" height="207" src="https://www.youtube.com/embed/RcmrbNRK-jY"  frameborder="0" allowfullscreen></iframe>
					</div>
					<div class="vid-2">
						<h2 id="heading-vid-2" style="margin:46px 5px 17px 15px;font-weight:900;text-align:center">Most Affordable Destinations!!</h2>
						<iframe  id="vid-2" width="300" height="200" src="https://www.youtube.com/embed/sRyslbdtT90" frameborder="0" allowfullscreen></iframe>
						
					</div><br><br><hr>

					<div class="col-sm-2">
						<button type="button" id="videos-prev" class=btn style="background-color:#14247a;margin:-12px 10px -10px 160px;color:white;">Prev</button>
					</div>
					<div class="col-sm-2">
						<button type="button" id="videos-next" class=btn style="background-color:#14247a;margin:-12px 10px -10px 10px;color:white;">Next</button>
					</div>
				</div>
			</div>
			<div class="col-sm-4" style="background-color:#222 !important; padding-bottom:20px">
			<div class="item authors">
				<div id="searcher2" style="margin-top:16px;padding-bottom:-15px">
				{% for author in authors_list %}
						<div class="authors_list thumbnail" style="background-image:url('http://cdn.wallpapersafari.com/73/78/je0icI.jpg');background-size:100% 100%;min-height:195px">
							<img src="{{ author.profile_pic.url }}" class="img-responsive" style="float:left;border-radius:5%;height:140px;width:130px;margin:15px 10px 5px 10px;">
							<a href="{{ author.get_absolute_url }}" style="text-decoration:none;color:white"><h2 style="margin:30px 5px 13px 15px;font-family:Cambria, Cochin, Georgia, Times, Times New Roman, serif;font-weight:900;margin-top:35px;">{{ author.full_name|capfirst}}</h2></a>
							<h4>{{ author.work|truncatechars:60 }}</h4><br>
							
						</div>
					{% endfor %}
			&nbsp;
			</div>
			<hr>	

					<span class="view_all_authors"><a href="{% url 'Posts:authors' %}"><button type="button" style="margin-left:40%;margin-top:-10px;margin-bottom:10px" class="btn btn-primary">View All</button></a></span>
		</div>

	</div>

	<script>
		$(document).ready(function () {
			$('.link').on('click', function (e) {
				e.preventDefault();
				$(".acti").removeClass("acti");
				$(this).addClass("acti")
				
			})
			$('#videos_link').on('click',function(){
				$('.videos').show();

			})
			$('#most_liked_link').on('click',function(){
				$('.videos').hide();
				{% for auth in authors_list_liked %}
					console.log(auth.content)
				{% endfor %}
				

			})


			var count=0
			$('#videos-prev').hide()
			function vid_display(count) {
					switch (count) {
						case 1:
							$('#heading-vid-1').text("Pro Packing Tips.!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/KT7KJPagp-I")

							$('#heading-vid-2').text("Top 10 Packing Essentials.!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/vCQE-D6AqNY")
							break;
						case 2:
							$('#heading-vid-2').text("3 Years Travel in 3 minutes.!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/wJF5NXygL4k")

							$('#heading-vid-1').text("Tips for Solo Travel.!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/cK3wK1bS7Do")
							break;
						case 3:
							$('#heading-vid-2').text("The Hong Kong Experience.!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/w1uoP9ZBDO8")

							$('#heading-vid-1').text("Tropical Paradise.!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/JFh38v0HJyQ")
							break;
						case 4:
							$('#heading-vid-2').text("How to Travel with No Money..!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/R7vmHGAshi8")

							$('#heading-vid-1').text("Travel Inspiration.!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/8Ulrn4D3M_Y")
							break;
						case 5:
							$('#heading-vid-2').text("Countries to visit in 2017..!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/Bwoz31mUzoc")

							$('#heading-vid-1').text("25 Must Visit Places.!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/k4tkrJ563b0")
							break;
						case 6:
							$('#heading-vid-1').text("10 Best Cities..!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/IQVdvGRkfKs")

							$('#heading-vid-2').text("10 Most Expensive Places.!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/OEgkqVbnv3E")
							break;
						case 7:
							$('#heading-vid-1').text("10 Best Airports..!!")
							$('#vid-1').attr("src", "https://www.youtube.com/embed/HUIBUYdEPPg")

							$('#heading-vid-2').text("Places to Visit in Canada.!!")
							$('#vid-2').attr("src", "https://www.youtube.com/embed/5jxexBzT20Y")
							break;
						case 8:
							$('#videos-next').hide();
							break;
						default:
							count =1;
							$('#videos-prev').hide();
							$('#videos-next').show();
							vid_display(count)

					}
				}
			
		    $('#videos-next').on('click',function(){
			$('#videos-prev').show()
			count+=1;
			vid_display(count)
			})
			$('#videos-prev').on('click', function () {
				$('#videos-next').show();
				count=count-1;
				vid_display(count)
			})


		
					$("#search_btn").on('click', function (e) {
					var val = $('#search_text').val();
					e.preventDefault();
					$('.view_all_posts').hide();
					if(val!=""){
					$.ajax({
						type: 'POST',
						dataType: 'json',
						url: '/searchPosts/',
						data: {
							'q': val,
							csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
						},
						success: function (result) {
							$('.pagination.posts').hide();
							$('.posts_list').remove();
							$('#searcher').empty();
							var len = (result['result'].length);
							console.log(len)
							for (var i = 0; i < len; i++) {

								title = result['result'][i]['title']
								content = result['result'][i]['content']
								content= content.toString();
								content = content.slice(0,60);
								console.log(content)
								image = result['result'][i]['image']
								full_name = result['result'][i]['full_name']
								timestamp = result['result'][i]['timestamp']
								var date=new Date(timestamp)
								var d=date.toDateString();

								updated = result['result'][i]['updated']
								slug = result['result'][i]['slug']
								var get_abs_url = "{% url 'Posts:postdetail' slug=12345 %}".replace(/12345/, slug);
								console.log(updated)
									$('#searcher').append('<div class="posts_list thumbnail" style="background-image:url(\'http://cdn.wallpapersafari.com/73/78/je0icI.jpg\');background-size:100% 100%;padding:13px !important;max-height:195px">'+
					'<img src="'+image+'" class="img-responsive" style="height:150px;width:140px;float:left;margin:10px 15px 10px 20px;border:0.8px solid grey">'+
					'<a href="'+get_abs_url+'" style="text-decoration:none;color:white;"><h2 style="margin:10px 5px 13px 15px;font-weight:900;">'+title+'</h2></a>'+
					'<div >'+content+'...</div><br>&nbsp; <span style="margin-top:80px !important"><p style="float:right;margin-bottom:2px;font-size:20px"><b>'+full_name+'</b></p><p style="margin-left:75%;margin-bottom:20px !important">'+d+'</p></span></div>')
												
							}
						}

					});
					}
				});

							$("#search_btn2").on('click', function (e) {
									var val = $('#search_authors').val();
									console.log(val)
									e.preventDefault();
									$('.view_all_authors').hide();
									if (val != "") {
									$.ajax({
										type: 'POST',
										dataType: 'json',
										url: '/searchAuthors/',
										data: {
											'query': val,
											csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
										},
										success: function (result) {
											console.log('inside search function')
											$('.pagination.authors').hide();
											$('.authors_list').remove();
											$('#searcher2').empty();
											var len = (result['result'].length);
											for (var i = 0; i < len; i++) {
												pk=		result['result'][i]['pk']
												work = result['result'][i]['work']
												address = result['result'][i]['address']
												full_name = result['result'][i]['full_name']
												profile_pic=result['result'][i]['profile_pic']
												var get_abs_url = "{% url 'Posts:authordetail' pk=12345 %}".replace(/12345/, pk);
													$('#searcher2').append('<div class="authors_list thumbnail" style="background-image:url(\'http://cdn.wallpapersafari.com/73/78/je0icI.jpg\');background-size:100% 100%;min-height:195px">'+
							'<img src="'+profile_pic+'" class="img-responsive" style="float:left;border-radius:5%;height:140px;width:130px;margin:15px 10px 5px 10px;">'+
							'<a href="'+get_abs_url+'" style="text-decoration:none;color:white"><h2 style="margin:30px 5px 13px 15px;font-family:Cambria, Cochin, Georgia, Times, Times New Roman, serif;font-weight:900;margin-top:35px;">'+full_name+'</h2></a>'+
							'<h4>'+work+'</h4><br></div>')
											}

										}

									});
									}
								});
							
									
		})

	</script>

</body>

</html>